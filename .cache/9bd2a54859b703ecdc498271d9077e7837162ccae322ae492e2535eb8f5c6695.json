{
  "url": "https://iterm2.com/3.0/documentation-escape-codes.html",
  "markdown": "# Proprietary Escape Codes - Documentation - iTerm2 - macOS Terminal Replacement\n[![](https://iterm2.com/img/logo2x.jpg)](https://iterm2.com/index.html)\n-   [Menu](#)\n-   [![](https://iterm2.com/images/DonateButton.png)](https://iterm2.com/donate.html)\n-   [![](https://iterm2.com/images/DonateButton.png)](https://iterm2.com/donate.html)\n-   [Home](https://iterm2.com/index.html)\n-   [News](https://iterm2.com/news.html)\n-   [Features](https://iterm2.com/features.html)\n-   [FAQ](https://iterm2.com/faq.html)\n-   [Documentation](https://iterm2.com/documentation.html)\n-   [Downloads](https://iterm2.com/downloads.html)\n[Table of Contents](#)\nIntroduction\n-   [Highlights for New Users](https://iterm2.com/documentation-highlights.html)\n-   [General Usage](https://iterm2.com/documentation-general-usage.html)\nUser Interface\n-   [Menu Items](https://iterm2.com/documentation-menu-items.html)\n-   [Settings](https://iterm2.com/documentation-preferences.html)\n-   [Touch Bar](https://iterm2.com/documentation-touch-bar.html)\n-   [Copy Mode](https://iterm2.com/documentation-copymode.html)\n-   [Fonts](https://iterm2.com/documentation-fonts.html)\n-   [Profile Search Syntax](https://iterm2.com/documentation-search-syntax.html)\n-   [Command Selection and Command URLs](https://iterm2.com/documentation-command-selection.html)\n-   [Status Bar](https://iterm2.com/documentation-status-bar.html)\nFeatures\n-   [Automatic Profile Switching](https://iterm2.com/documentation-automatic-profile-switching.html)\n-   [Badges](https://iterm2.com/documentation-badges.html)\n-   [Buried Sessions](https://iterm2.com/documentation-buried-sessions.html)\n-   [Captured Output](https://iterm2.com/documentation-captured-output.html)\n-   [Coprocesses](https://iterm2.com/documentation-coprocesses.html)\n-   [Hotkeys](https://iterm2.com/documentation-hotkey.html)\n-   [Session Restoration](https://iterm2.com/documentation-restoration.html)\n-   [Shell Integration](https://iterm2.com/documentation-shell-integration.html)\n-   [Smart Selection](https://iterm2.com/documentation-smart-selection.html)\n-   [tmux Integration](https://iterm2.com/documentation-tmux-integration.html)\n-   [Triggers](https://iterm2.com/documentation-triggers.html)\n-   [Utilities](https://iterm2.com/documentation-utilities.html)\n-   [Web Browser](https://iterm2.com/documentation-web.html)\n-   [AI Chat](https://iterm2.com/documentation-ai-chat.html)\nScripting\n-   [Scripting Fundamentals](https://iterm2.com/documentation-scripting-fundamentals.html)\n-   [Scripting Variables](https://iterm2.com/documentation-variables.html)\n-   [Python API](https://iterm2.com/python-api)\n-   [Scripting with AppleScript (Deprecated)](https://iterm2.com/documentation-scripting.html)\nAdvanced\n-   [Dynamic Profiles](https://iterm2.com/documentation-dynamic-profiles.html)\n-   [Inline Images Protocol](https://iterm2.com/documentation-images.html)\n-   [Proprietary Escape Codes](https://iterm2.com/documentation-escape-codes.html)\n---\n# Proprietary Escape Codes\n**WARNING: This document is for an older version of iTerm2.**\niTerm2 supports several non-standard escape codes. These may not work properly in tmux or screen, and may have unknown effects on other terminal emulators. Proceed with caution.\nA quick comment on notation: in this document, ^\\[ means \"Escape\" (hex code 0x1b) and ^G means \"bel\" (hex code 0x07).\nThe OSC command `50` used to be used but it conflicts with xterm, so it is now `1337`.\n#### Set cursor shape\n```\n^[]1337;CursorShape=N^G\n```\nwhere N=0, 1, or 2.\n-   0: Block\n-   1: Vertical bar\n-   2: Underline\nAdd this to your .vimrc to change cursor shape in insert mode:\n```\nlet &t_SI = \"\\<Esc>]1337;CursorShape=1\\x7\"\nlet &t_EI = \"\\<Esc>]1337;CursorShape=0\\x7\"\n```\nThis is derived from [Konsole](https://vim.wikia.com/wiki/Change_cursor_shape_in_different_modes).\n#### Set Mark\nThe \"Set Mark\" (cmd-shift-M) command allows you to record a location and then jump back to it later (with cmd-shift-J). The following escape code has the same effect as that command:\n```\n^[]1337;SetMark^G\n```\n#### Steal Focus\nTo bring iTerm2 to the foreground:\n```\n^[]1337;StealFocus^G\n```\n#### Clear Scrollback History\nTo erase the scrollback history:\n```\n^[]1337;ClearScrollback^G\n```\n#### Set curent directory\nTo inform iTerm2 of the current directory to help semantic history:\n```\n^[]1337;CurrentDir=/the/current/directory^G\n```\n#### Post a Growl notification\nTo post a Growl notification:\n```\n^[]9;Message content goes here^G\n```\nThis will have no effect if Growl is not running.\n#### Change profile\nTo change the session's profile on the fly:\n```\n^[]1337;SetProfile=NewProfileName^G\n```\n#### Copy to clipboard\nTo place text in the pasteboard:\n```\n^[]1337;CopyToClipboard=name^G\n```\nWhere name is one of \"rule\", \"find\", \"font\", or empty to mean the general pasteboard (which is what you normally want). After this is sent, all text received is placed in the pasteboard until this code comes in:\n```\n^[]1337;EndCopy^G\n```\n#### Set window title and tab chrome background color\nTo set the window title and tab color use this escape sequence:\n```\n^[]6;1;bg;red;brightness;N^G\n^[]6;1;bg;green;brightness;N^G\n^[]6;1;bg;blue;brightness;N^G\n```\nReplace N with a decimal value in 0 to 255.\nExample in bash that turns the background purple:\n```\necho -e \"\\033]6;1;bg;red;brightness;255\\a\"\necho -e \"\\033]6;1;bg;green;brightness;0\\a\"\necho -e \"\\033]6;1;bg;blue;brightness;255\\a\"\n```\nTo reset the window title and tab color, use this code:\n```\n^[]6;1;bg;*;default^G\n```\nFor example:\n```\necho -e \"\\033]6;1;bg;*;default\\a\"\n```\n#### Change the color palette\n```\n^[]Pnrrggbb^[\\\n```\nReplace \"n\" with:\n-   0-f (hex) = ansi color\n-   g = foreground\n-   h = background\n-   i = bold color\n-   j = selection color\n-   k = selected text color\n-   l = cursor\n-   m = cursor text\nrr, gg, bb are 2-digit hex value (for example, \"ff\"). Example in bash that changes the foreground color blue:\n```\necho -e \"\\033]Pg4040ff\\033\\\\\"\n```\n#### Annotations\nTo add an annotation use on of these sequences:\n```\n^[]1337;AddAnnotation=message^G\n^[]1337;AddAnnotation=length|message^G\n^[]1337;AddAnnotation=message|length|x-coord|y-coord^G\n^[]1337;AddHiddenAnnotation=message^G\n^[]1337;AddHiddenAnnotation=length|message^G\n^[]1337;AddHiddenAnnotation=message|length|x-coord|y-coord^G\n```\n-   message: The message to attach to the annotation.\n-   length: The number of cells to annotate. Defaults to the rest of the line beginning at the start of the annotation.\n-   x-coord and y-coord: The starting coordinate for the annotation. Defaults to the cursor's coordinate.\n_AddHiddenAnnotation_ does not reveal the annotation window at the time the escape sequence is received, while _AddAnnotation_ opens it immediately.\n#### Cursor Guide\n```\n^[]1337;HighlightCursorLine=boolean^G\n```\nThe _boolean_ should be _yes_ or _no_. This shows or hides the cursor guide.\n#### Attention\n```\n^[]1337;RequestAttention=boolean^G\n```\nThe boolean should be _yes_ to request attention by bouncing the dock icon and _no_ to cancel a previous request.\n#### Background Image\n```\n^[]1337;SetBackgroundImageFile=base64^G\n```\nThe value of _base64_ is a base64-encoded filename to display as a background image. If it is an empty string then the background image iwll be removed. User confirmation is required as a security measure.\n#### Report Cell Size\n```\n^[]1337;ReportCellSize^G\n```\nThe terminal responds with:\n```\n^[]1337;ReportCellSize=height;width^G\n```\nWhere _height_ and _width_ are floating point values giving the size in points of a single character cell. For example:\n```\n^[]1337;ReportCellSize=17.50;8.00^[\\\n```\n#### Badge\nThe badge has custom escape sequences described [here](https://iterm2.com/3.0/documentation-badges.html).\n#### Downloads\nFor information on file downloads and inline images, see [here](https://iterm2.com/3.0/documentation-images.html).\n## Shell Integration/FinalTerm\niTerm2's [Shell Integration](https://iterm2.com/3.0/documentation-shell-integration.html) feature is made possible by proprietary escape sequences pioneered by the FinalTerm emulator. FinalTerm is defunct, but the escape sequences are documented here.\n### Definitions\n-   `OSC` stands for _Operating System Command_. In practice it refers to this sequence of two ASCII characters: 27, 93 (`esc ]`).\n-   `ST` stands for _String Terminator_. It terminates an OSC sequence and consists either of two ASCII characters 27, 92 (`esc \\`) or ASCII 7 (`bel`).\nOSC sequences always begin with `OSC`, are followed by a sequence of characters, and are terminated with `ST`.\nMost `OSC` codes begin with a number (one or more decimal digits), which we'll call the \"command\" in this document. If the command takes parameters it will be followed by a semicolon and the structure of the rest of the body of the `OSC` sequence is dependent on the command. Well-behaved terminal emulators ignore `OSC` codes with unrecognized commands.\n### Concepts\nThe goal of the FinalTerm escape sequences is to mark up a shell's output with semantic information about where the prompt begins, where the user-entered command begins, and where the command's output begins and ends.\n**\\[PROMPT\\]**prompt% **\\[COMMAND\\_START\\]** ls -l\n**\\[COMMAND\\_EXECUTED\\]**\n\\-rw-r--r-- 1 user group 127 May 1 2016 filename\n**\\[COMMAND\\_FINISHED\\]**\n### Escape Sequences\nFinalTerm originally defined various escape sequences in its original spec that are not supported by iTerm2 and are not described in this document. The best remaining references to these codes are in iTerm2's source code.\n#### FTCS\\_PROMPT\n`OSC 1 3 3 ; A ST`\nSent just before start of shell prompt.\n#### FTCS\\_COMMAND\\_START\n`OSC 1 3 3 ; B ST`\nSent just after end of shell prompt, before the user-entered command.\n#### FTCS\\_COMMAND\\_EXECUTED\n`OSC 1 3 3 ; C ST`\nSent just before start of command output. All text between `FTCS_COMMAND_START` and `FTCS_COMMAND_EXECUTED` at the time `FTCS_COMMAND_EXECUTED` is received excluding terminal whitespace is considered the command the user entered. It is expected that user-entered commands will be edited interactively, so the screen contents are captured without regard to how they came to contain their state. If the cursor's location is before (above, or if on the same line, left of) its location when `FTCS_COMMAND_START` was received, then the command will be treated as the empty string.\n#### FTCS\\_COMMAND\\_FINISHED\n`OSC 1 3 3 ; D ; Ps ST`\n`OSC 1 3 3 ; D ST` (for cancellation only)\nThe interpretation of this command depends on which `FTCS` was most recently received prior to `FTCS_COMMAND_FINISHED`.\nThis command may be sent after `FTCS_COMMAND_START` to indicate that a command was aborted. All state associated with the preceding prompt and the command until its receipt will be deleted. Either form is accepted for an abort. If the Ps argument is provided to an abort it will be ignored.\nIf this command is sent after `FTCS_COMMAND_EXECUTED`, then it indicates the end of command prompt. Ps is the command's exit status, a number in the range 0-255 represented as one or more ASCII decimal digits. A status of 0 is considered \"success\" and nonzero indicates \"failure.\" The terminal may choose to indicate this visually.\nIf neither `FTCS_COMMAND_START` nor `FTCS_COMMAND_EXECUTED` was sent prior to `FTCS_COMMAND_FINISHED` it should be ignored.\n### iTerm2 Extensions\niTerm2 extends FinalTerm's suite of escape sequences.\n#### SetUserVar\n`OSC 1 3 3 7 ; S e t U s e r V a r = Ps1 = Ps2 ST`\nSets the value of a user-defined variable. iTerm2 keeps a dictionary of key-value pairs which may be used within iTerm2 as string substitutions, such as in the [Badge](https://iterm2.com/badges.html).\nPs1 is the key.\nPs2 is the base64-encoded value.\n#### ShellIntegrationVersion\n`OSC 1 3 3 7 ; S h e l l I n t e g r a t i o n V e r s i o n = Pn ; Ps ST`\n`OSC 1 3 3 7 ; S h e l l I n t e g r a t i o n V e r s i o n = Pn ST` (deprecated)\nReports the current version of the shell integration script.\nPn is the version.\nPs is the name of the shell (e.g., `bash`).\niTerm2 has a baked-in notion of the \"current\" version and if it sees a lower number the user will be prompted to upgrade. The version number is specific to the shell.\n#### RemoteHost\n`OSC 1 3 3 7 ; R e m o t e H o s t = Ps1 @ Ps2 ST`\nReports the user name and hostname.\nPs1 is username. Ps2 is fully-qualified hostname.\n#### CurrentDir\n`OSC 1 3 3 7 ; C u r r e n t D i r = Ps1 ST`\nReports the current directory.\nPs1 is the current directory.\niTerm2 by George Nachman. Website by Matthew Freeman, George Nachman, and James A. Rosen.\nWebsite updated and optimized by [HexBrain](http://hexbrain.com)",
  "timestamp": 1763346924793,
  "title": "Proprietary Escape Codes - Documentation - iTerm2 - macOS Terminal Replacement"
}